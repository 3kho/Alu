<script src="/uv/uv.bundle.js" is:inline></script>
<script src="/uv.config.js" is:inline></script>
<script>
declare global {
  interface Window {
    __uv$config: any;
  }
}
const form = document.querySelector('form')!;
const input = document.querySelector('input')!;

window.navigator.serviceWorker.register('/sw.js', {
    scope: window.__uv$config.prefix
})

form.addEventListener('submit', (event) => {
    event.preventDefault();
        let url = input.value.trim();
        if (!isUrl(url)) url = 'https://www.google.com/search?q=' + url;
        else if (!(url.startsWith('https://') || url.startsWith('http://'))) url = 'http://' + url;
        let loadingContent = document.getElementById('loading-content');
        if (loadingContent) loadingContent.style.opacity = "1";
        
        window.location.href = window.__uv$config.prefix + window.__uv$config.encodeUrl(url);
});

function isUrl(val = ''){
    if (/^http(s?):\/\//.test(val) || val.includes('.') && val.substr(0, 1) !== ' ') return true;
    return false;
};
</script>